var rr=Object.defineProperty;var nt=a=>{throw TypeError(a)};var sr=(a,s,e)=>s in a?rr(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e;var g=(a,s,e)=>sr(a,typeof s!="symbol"?s+"":s,e),_e=(a,s,e)=>s.has(a)||nt("Cannot "+e);var u=(a,s,e)=>(_e(a,s,"read from private field"),e?e.call(a):s.get(a)),p=(a,s,e)=>s.has(a)?nt("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(a):s.set(a,e),f=(a,s,e,t)=>(_e(a,s,"write to private field"),t?t.call(a,e):s.set(a,e),e),S=(a,s,e)=>(_e(a,s,"access private method"),e);var at=(a,s,e,t)=>({set _(r){f(a,s,r,e)},get _(){return u(a,s,t)}});import{c as ht,k as Ge,p as We,r as Ae,a as dt,s as mt,b as pt,d as He,e as gt,f as m,h as ee,g as ve,i as E,t as Ve,j as Qe,l as bt,z as ge,m as yt,n as wt,o as Xe,q as we,I as kt,u as P,B as Ie,v as nr,w as ar,x as b,y as Et,J as v,N as T,F as C,A as Rt,C as Pt,D as ke,E as vt,G as Tt,H as Te,K as Nt,T as St,L as _t,M as Ot,U as Fe,O as Ee,P as xt,Q as te,R as Ct,S as ir,V as At,W as or,X as cr,Y as it,Z as ur,_ as It,$ as Ft,a0 as Bt,a1 as Ut,a2 as Dt,a3 as Mt,a4 as be,a5 as Be,a6 as $t,a7 as jt,a8 as lr,a9 as qt,aa as Jt,ab as fr,ac as hr,ad as dr,ae as mr,af as pr,ag as gr,ah as br,ai as yr,aj as wr,ak as kr,al as Er,am as Rr,an as Pr,ao as vr,ap as Tr,aq as Nr,ar as Sr,as as _r,at as Or,au as xr,av as Cr,aw as Ar,ax as Ir,ay as Fr,az as Br,aA as Ur,aB as Dr,aC as Mr,aD as $r,aE as jr,aF as qr,aG as Jr,aH as Kr,aI as zr,aJ as Lr,aK as Gr,aL as Wr,aM as Hr,aN as Vr,aO as Qr,aP as Xr,aQ as Zr,aR as Yr,aS as es,aT as ts,aU as rs,aV as ss,aW as ns,aX as as,aY as is,aZ as os,a_ as cs,a$ as us,b0 as ls,b1 as fs,b2 as hs,b3 as ds,b4 as ms,b5 as ps,b6 as gs,b7 as bs,b8 as ys,b9 as ws,ba as ks,bb as Es,bc as Rs,bd as Ps,be as vs,bf as Ts,bg as Ns,bh as Ss,bi as _s,bj as Os,bk as xs,bl as Cs,bm as As,bn as Is,bo as Fs,bp as Bs,bq as Us,br as Ds,bs as Ms,bt as $s,bu as js,bv as qs,bw as Js,bx as Ks,by as zs,bz as Ls,bA as Gs,bB as Ws,bC as Hs,bD as Vs,bE as Qs,bF as Xs,bG as Zs}from"./index-DZ9DkKuG.js";const Ys=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),en=BigInt("1000000000000000000"),tn=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rn=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),sn=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function nn(){ht.lock(),Ge.lock(),We.lock(),Ae.lock(),dt.lock(),mt.lock(),pt.lock(),He.lock(),gt.lock(),Ae.lock()}const an=new RegExp("^bytes([0-9]+)$"),on=new RegExp("^(u?int)([0-9]*)$"),cn=new RegExp("^(.*)\\[([0-9]*)\\]$");function Kt(a,s,e){switch(a){case"address":return e?E(ge(s,32)):E(Qe(s));case"string":return Ve(s);case"bytes":return E(s);case"bool":return s=s?"0x01":"0x00",e?E(ge(s,32)):E(s)}let t=a.match(on);if(t){let r=t[1]==="int",n=parseInt(t[2]||"256");return m((!t[2]||t[2]===String(n))&&n%8===0&&n!==0&&n<=256,"invalid number type","type",a),e&&(n=256),r&&(s=bt(s,n)),E(ge(yt(s),n/8))}if(t=a.match(an),t){const r=parseInt(t[1]);return m(String(r)===t[1]&&r!==0&&r<=32,"invalid bytes type","type",a),m(wt(s)===r,`invalid value for ${a}`,"value",s),e?E(Xe(s,32)):s}if(t=a.match(cn),t&&Array.isArray(s)){const r=t[1],n=parseInt(t[2]||String(s.length));m(n===s.length,`invalid array length for ${a}`,"value",s);const i=[];return s.forEach(function(o){i.push(Kt(r,o,!0))}),E(ve(i))}m(!1,"invalid type","type",a)}function Ze(a,s){m(a.length===s.length,"wrong number of values; expected ${ types.length }","values",s);const e=[];return a.forEach(function(t,r){e.push(Kt(t,s[r]))}),ee(ve(e))}function un(a,s){return Ge(Ze(a,s))}function ln(a,s){return He(Ze(a,s))}function fn(a){const s=Ve(a);if(s.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Xe(s,32)}function hn(a){const s=E(a,"bytes");if(s.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(s[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let e=31;for(;s[e-1]===0;)e--;return we(s.slice(0,e))}class Ye{constructor(s,e,t){g(this,"interface");g(this,"bytecode");g(this,"runner");const r=kt.from(s);e instanceof Uint8Array?e=ee(E(e)):(typeof e=="object"&&(e=e.object),e.startsWith("0x")||(e="0x"+e),e=ee(E(e))),P(this,{bytecode:e,interface:r,runner:t||null})}attach(s){return new Ie(s,this.interface,this.runner)}async getDeployTransaction(...s){let e={};const t=this.interface.deploy;if(t.inputs.length+1===s.length&&(e=await nr(s.pop())),t.inputs.length!==s.length)throw new Error("incorrect number of arguments to constructor");const r=await ar(this.runner,t.inputs,s),n=ve([this.bytecode,this.interface.encodeDeploy(r)]);return Object.assign({},e,{data:n})}async deploy(...s){const e=await this.getDeployTransaction(...s);b(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const t=await this.runner.sendTransaction(e),r=Et(t);return new Ie(r,this.interface,this.runner,t)}connect(s){return new Ye(this.interface,this.bytecode,s)}static fromSolidity(s,e){m(s!=null,"bad compiler output","output",s),typeof s=="string"&&(s=JSON.parse(s));const t=s.abi;let r="";return s.bytecode?r=s.bytecode:s.evm&&s.evm.bytecode&&(r=s.evm.bytecode),new this(t,r,e)}}const ot=new Set;function U(a){ot.has(a)||(ot.add(a),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${a} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}const le="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function dn(a){switch(a){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"filecoin":return"rpc.ankr.com/filecoin";case"filecoin-calibration":return"rpc.ankr.com/filecoin_testnet";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}m(!1,"unsupported network","network",a)}class re extends v{constructor(e,t){e==null&&(e="mainnet");const r=T.from(e);t==null&&(t=le);const n={polling:!0,staticNetwork:r},i=re.getRequest(r,t);super(i,r,n);g(this,"apiKey");P(this,{apiKey:t})}_getProvider(e){try{return new re(e,this.apiKey)}catch{}return super._getProvider(e)}static getRequest(e,t){t==null&&(t=le);const r=new C(`https://${dn(e.name)}/${t}`);return r.allowGzip=!0,t===le&&(r.retryFunc=async(n,i,o)=>(U("AnkrProvider"),!0)),r}getRpcError(e,t){return e.method==="eth_sendRawTransaction"&&t&&t.error&&t.error.message==="INTERNAL_ERROR: could not replace existing tx"&&(t.error.message="replacement transaction underpriced"),super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===le}}const fe="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function mn(a){switch(a){case"mainnet":return"eth-mainnet.g.alchemy.com";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}m(!1,"unsupported network","network",a)}class se extends v{constructor(e,t){e==null&&(e="mainnet");const r=T.from(e);t==null&&(t=fe);const n=se.getRequest(r,t);super(n,r,{staticNetwork:r});g(this,"apiKey");P(this,{apiKey:t})}_getProvider(e){try{return new se(e,this.apiKey)}catch{}return super._getProvider(e)}async _perform(e){if(e.method==="getTransactionResult"){const{trace:t,tx:r}=await Rt({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(t==null||r==null)return null;let n,i=!1;try{n=t[0].result.output,i=t[0].error==="Reverted"}catch{}if(n)return b(!i,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:r,invocation:null,revert:null}),n;b(!1,"could not parse trace result","BAD_DATA",{value:t})}return await super._perform(e)}isCommunityResource(){return this.apiKey===fe}static getRequest(e,t){t==null&&(t=fe);const r=new C(`https://${mn(e.name)}/v2/${t}`);return r.allowGzip=!0,t===fe&&(r.retryFunc=async(n,i,o)=>(U("alchemy"),!0)),r}}function he(a){switch(a){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}m(!1,"unsupported network","network",a)}function pn(a){switch(a){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}m(!1,"unsupported network","network",a)}class ne extends v{constructor(e,t){e==null&&(e="mainnet");const r=T.from(e);t==null&&(t=he(r.name));const n=ne.getRequest(r,t);super(n,r,{staticNetwork:r});g(this,"apiKey");P(this,{apiKey:t})}_getProvider(e){try{return new ne(e,this.apiKey)}catch{}return super._getProvider(e)}isCommunityResource(){return this.apiKey===he(this._network.name)}static getRequest(e,t){t==null&&(t=he(e.name));const r=new C(`https://${pn(e.name)}/${t}`);return r.allowGzip=!0,t===he(e.name)&&(r.retryFunc=async(n,i,o)=>(U("ChainstackProvider"),!0)),r}}class zt extends v{constructor(s){s==null&&(s="mainnet");const e=T.from(s);m(e.name==="mainnet","unsupported network","network",s),super("https://cloudflare-eth.com/",e,{staticNetwork:e})}}const gn="1 11155111 17000 560048 2741 11124 33111 33139 42170 42161 421614 43114 43113 8453 84532 80069 80094 199 1029 81457 168587773 56 97 42220 11142220 252 2523 100 999 737373 747474 59144 59141 5000 5003 43521 143 10143 1287 1284 1285 10 11155420 204 5611 80002 137 534352 534351 1329 1328 146 14601 988 2201 1923 1924 167013 167000 130 1301 480 4801 51 50 324 300".split(/ /g),ct=2e3;function bn(a){return a&&typeof a.then=="function"}const Lt="org.ethers.plugins.provider.Etherscan";class et extends Pt{constructor(e){super(Lt);g(this,"baseUrl");P(this,{baseUrl:e})}clone(){return new et(this.baseUrl)}}const yn=["enableCcipRead"];let wn=1;var L;class Gt extends ke{constructor(e,t){const r=t??null;super();g(this,"network");g(this,"apiKey");p(this,L);const n=T.from(e);m(gn.indexOf(`${n.chainId}`)>=0,"unsupported network","network",n),f(this,L,n.getPlugin(Lt)),P(this,{apiKey:r,network:n})}getBaseUrl(){if(u(this,L))return u(this,L).baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}m(!1,"unsupported network","network",this.network)}getUrl(e,t){let r=Object.keys(t).reduce((n,i)=>{const o=t[i];return o!=null&&(n+=`&${i}=${o}`),n},"");return this.apiKey&&(r+=`&apikey=${this.apiKey}`),`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${e}${r}`}getPostUrl(){return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t.chainid=this.network.chainId,t}async detectNetwork(){return this.network}async fetch(e,t,r){const n=wn++,i=r?this.getPostUrl():this.getUrl(e,t),o=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:n,url:i,payload:o});const c=new C(i);c.setThrottleParams({slotInterval:1e3}),c.retryFunc=(w,h,y)=>(this.isCommunityResource()&&U("Etherscan"),Promise.resolve(!0)),c.processFunc=async(w,h)=>{const y=h.hasBody()?JSON.parse(we(h.body)):{},X=(typeof y.result=="string"?y.result:"").toLowerCase().indexOf("rate limit")>=0;return e==="proxy"?y&&y.status==0&&y.message=="NOTOK"&&X&&(this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:y}),h.throwThrottleError(y.result,ct)):X&&(this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:y.result}),h.throwThrottleError(y.result,ct)),h},o&&(c.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),c.body=Object.keys(o).map(w=>`${w}=${o[w]}`).join("&"));const d=await c.send();try{d.assertOk()}catch(w){this.emit("debug",{action:"receiveError",id:n,error:w,reason:"assertOk"}),b(!1,"response error","SERVER_ERROR",{request:c,response:d})}d.hasBody()||(this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"}),b(!1,"missing response","SERVER_ERROR",{request:c,response:d}));const l=JSON.parse(we(d.body));return e==="proxy"?(l.jsonrpc!="2.0"&&(this.emit("debug",{action:"receiveError",id:n,result:l,reason:"invalid JSON-RPC"}),b(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:c,response:d,info:{result:l}})),l.error&&(this.emit("debug",{action:"receiveError",id:n,result:l,reason:"JSON-RPC error"}),b(!1,"error response","SERVER_ERROR",{request:c,response:d,info:{result:l}})),this.emit("debug",{action:"receiveRequest",id:n,result:l}),l.result):l.status==0&&(l.message==="No records found"||l.message==="No transactions found")?(this.emit("debug",{action:"receiveRequest",id:n,result:l}),l.result):((l.status!=1||typeof l.message=="string"&&!l.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:n,result:l}),b(!1,"error response","SERVER_ERROR",{request:c,response:d,info:{result:l}})),this.emit("debug",{action:"receiveRequest",id:n,result:l}),l.result)}_getTransactionPostData(e){const t={};for(let r in e){if(yn.indexOf(r)>=0||e[r]==null)continue;let n=e[r];if(!(r==="type"&&n===0)&&!(r==="blockTag"&&n==="latest")){if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r])n=vt(n);else if(r==="accessList")n="["+Tt(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]";else if(r==="blobVersionedHashes"){if(n.length===0)continue;b(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:e}})}else n=ee(n);t[r]=n}}return t}_checkError(e,t,r){let n="";if(Te(t,"SERVER_ERROR")){try{n=t.info.result.error.message}catch{}if(!n)try{n=t.info.message}catch{}}if(e.method==="estimateGas"&&!n.match(/revert/i)&&n.match(/insufficient funds/i)&&b(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction}),(e.method==="call"||e.method==="estimateGas")&&n.match(/execution reverted/i)){let i="";try{i=t.info.result.error.data}catch{}const o=Nt.getBuiltinCallException(e.method,e.transaction,i);throw o.info={request:e,error:t},o}if(n&&e.method==="broadcastTransaction"){const i=St.from(e.signedTransaction);n.match(/replacement/i)&&n.match(/underpriced/i)&&b(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:i}),n.match(/insufficient funds/)&&b(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:i}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&b(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:i})}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";if(this.network.name==="optimism")return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(t=>this._checkError(e,t,e.signedTransaction));case"getBlock":if("blockTag"in e)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});b(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if(e.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_call";try{return await this.fetch("proxy",t,!0)}catch(r){return this._checkError(e,r,e.transaction)}}case"estimateGas":{const t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return await this.fetch("proxy",t,!0)}catch(r){return this._checkError(e,r,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){return this.network.name!=="mainnet"?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){let t=this._getAddress(e);bn(t)&&(t=await t);try{const r=await this.fetch("contract",{action:"getabi",address:t}),n=JSON.parse(r);return new _t(t,n,this)}catch{return null}}isCommunityResource(){return this.apiKey==null}}L=new WeakMap;function kn(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const En=kn().WebSocket;var _,ie,A,$,I;class Ne{constructor(s,e){p(this,_);p(this,ie);p(this,A);p(this,$);p(this,I);f(this,_,s),f(this,ie,JSON.stringify(e)),f(this,A,null),f(this,$,null),f(this,I,null)}get filter(){return JSON.parse(u(this,ie))}start(){f(this,A,u(this,_).send("eth_subscribe",this.filter).then(s=>(u(this,_)._register(s,this),s)))}stop(){u(this,A).then(s=>{u(this,_).destroyed||u(this,_).send("eth_unsubscribe",[s])}),f(this,A,null)}pause(s){b(s,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),f(this,$,!!s)}resume(){f(this,$,null)}_handleMessage(s){if(u(this,A)!=null&&u(this,$)===null){let e=u(this,I);e==null?e=this._emit(u(this,_),s):e=e.then(async()=>{await this._emit(u(this,_),s)}),f(this,I,e.then(()=>{u(this,I)===e&&f(this,I,null)}))}}async _emit(s,e){throw new Error("sub-classes must implemente this; _emit")}}_=new WeakMap,ie=new WeakMap,A=new WeakMap,$=new WeakMap,I=new WeakMap;class Wt extends Ne{constructor(s){super(s,["newHeads"])}async _emit(s,e){s.emit("block",parseInt(e.number))}}class Ht extends Ne{constructor(s){super(s,["newPendingTransactions"])}async _emit(s,e){s.emit("pending",e)}}var oe;class Vt extends Ne{constructor(e,t){super(e,["logs",t]);p(this,oe);f(this,oe,JSON.stringify(t))}get logFilter(){return JSON.parse(u(this,oe))}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}}oe=new WeakMap;var j,G,F;class Qt extends Ot{constructor(e,t){const r=Object.assign({},t??{});m(r.batchMaxCount==null||r.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",t),r.batchMaxCount=1,r.staticNetwork==null&&(r.staticNetwork=!0);super(e,r);p(this,j);p(this,G);p(this,F);f(this,j,new Map),f(this,G,new Map),f(this,F,new Map)}_getSubscriber(e){switch(e.type){case"close":return new Fe("close");case"block":return new Wt(this);case"pending":return new Ht(this);case"event":return new Vt(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log")return new Fe("drop-log")}return super._getSubscriber(e)}_register(e,t){u(this,G).set(e,t);const r=u(this,F).get(e);if(r){for(const n of r)t._handleMessage(n);u(this,F).delete(e)}}async _send(e){m(!Array.isArray(e),"WebSocket does not support batch send","payload",e);const t=new Promise((r,n)=>{u(this,j).set(e.id,{payload:e,resolve:r,reject:n})});return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await t]}async _processMessage(e){const t=JSON.parse(e);if(t&&typeof t=="object"&&"id"in t){const r=u(this,j).get(t.id);if(r==null){this.emit("error",Ee("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));return}u(this,j).delete(t.id),r.resolve(t)}else if(t&&t.method==="eth_subscription"){const r=t.params.subscription,n=u(this,G).get(r);if(n)n._handleMessage(t.params.result);else{let i=u(this,F).get(r);i==null&&(i=[],u(this,F).set(r,i)),i.push(t.params.result)}}else{this.emit("error",Ee("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));return}}async _write(e){throw new Error("sub-classes must override this")}}j=new WeakMap,G=new WeakMap,F=new WeakMap;var q,N;class tt extends Qt{constructor(e,t,r){super(t,r);p(this,q);p(this,N);typeof e=="string"?(f(this,q,()=>new En(e)),f(this,N,u(this,q).call(this))):typeof e=="function"?(f(this,q,e),f(this,N,e())):(f(this,q,null),f(this,N,e)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(n){console.log("failed to start WebsocketProvider",n)}},this.websocket.onmessage=n=>{this._processMessage(n.data)}}get websocket(){if(u(this,N)==null)throw new Error("websocket closed");return u(this,N)}async _write(e){this.websocket.send(e)}async destroy(){u(this,N)!=null&&(u(this,N).close(),f(this,N,null)),super.destroy()}}q=new WeakMap,N=new WeakMap;const Z="84842078b09946638c03157f83405213";function Rn(a){switch(a){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}m(!1,"unsupported network","network",a)}class Xt extends tt{constructor(e,t){const r=new Q(e,t),n=r._getConnection();b(!n.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const i=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,r._network);g(this,"projectId");g(this,"projectSecret");P(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===Z}}class Q extends v{constructor(e,t,r){e==null&&(e="mainnet");const n=T.from(e);t==null&&(t=Z),r==null&&(r=null);const i=Q.getRequest(n,t,r);super(i,n,{staticNetwork:n});g(this,"projectId");g(this,"projectSecret");P(this,{projectId:t,projectSecret:r})}_getProvider(e){try{return new Q(e,this.projectId,this.projectSecret)}catch{}return super._getProvider(e)}isCommunityResource(){return this.projectId===Z}static getWebSocketProvider(e,t){return new Xt(e,t)}static getRequest(e,t,r){t==null&&(t=Z),r==null&&(r=null);const n=new C(`https://${Rn(e.name)}/v3/${t}`);return n.allowGzip=!0,r&&n.setCredentials("",r),t===Z&&(n.retryFunc=async(i,o,c)=>(U("InfuraProvider"),!0)),n}}const de="919b412a057b5e9c9b6dce193c5a60242d6efadb";function Pn(a){switch(a){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}m(!1,"unsupported network","network",a)}class ae extends v{constructor(e,t){e==null&&(e="mainnet");const r=T.from(e);t==null&&(t=de);const n=ae.getRequest(r,t);super(n,r,{staticNetwork:r});g(this,"token");P(this,{token:t})}_getProvider(e){try{return new ae(e,this.token)}catch{}return super._getProvider(e)}isCommunityResource(){return this.token===de}static getRequest(e,t){t==null&&(t=de);const r=new C(`https://${Pn(e.name)}/${t}`);return r.allowGzip=!0,t===de&&(r.retryFunc=async(n,i,o)=>(U("QuickNodeProvider"),!0)),r}}const vn=BigInt("1"),Tn=BigInt("2");function Nn(a){for(let s=a.length-1;s>0;s--){const e=Math.floor(Math.random()*(s+1)),t=a[s];a[s]=a[e],a[e]=t}}function Sn(a){return new Promise(s=>{setTimeout(s,a)})}function Ue(){return new Date().getTime()}function Oe(a){return JSON.stringify(a,(s,e)=>typeof e=="bigint"?{type:"bigint",value:e.toString()}:e)}const ut={stallTimeout:400,priority:1,weight:1},lt={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function _n(a,s){for(;(a.blockNumber<0||a.blockNumber<s)&&(a._updateNumber||(a._updateNumber=(async()=>{try{const e=await a.provider.getBlockNumber();e>a.blockNumber&&(a.blockNumber=e)}catch(e){a.blockNumber=-2,a._lastFatalError=e,a._lastFatalErrorTimestamp=Ue()}a._updateNumber=null})()),await a._updateNumber,a.outOfSync++,!a._lastFatalError););}function z(a){if(a==null)return"null";if(Array.isArray(a))return"["+a.map(z).join(",")+"]";if(typeof a=="object"&&typeof a.toJSON=="function")return z(a.toJSON());switch(typeof a){case"boolean":case"symbol":return a.toString();case"bigint":case"number":return BigInt(a).toString();case"string":return JSON.stringify(a);case"object":{const s=Object.keys(a);return s.sort(),"{"+s.map(e=>`${JSON.stringify(e)}:${z(a[e])}`).join(",")+"}"}}throw console.log("Could not serialize",a),new Error("Hmm...")}function xe(a,s){if("error"in s){const t=s.error;let r;return Te(t,"CALL_EXCEPTION")?r=z(Object.assign({},t,{shortMessage:void 0,reason:void 0,info:void 0})):r=z(t),{tag:r,value:t}}const e=s.result;return{tag:z(e),value:e}}function ye(a,s){const e=new Map;for(const{value:r,tag:n,weight:i}of s){const o=e.get(n)||{value:r,weight:0};o.weight+=i,e.set(n,o)}let t=null;for(const r of e.values())r.weight>=a&&(!t||r.weight>t.weight)&&(t=r);if(t)return t.value}function De(a,s){let e=0;const t=new Map;let r=null;const n=[];for(const{value:o,tag:c,weight:d}of s)if(o instanceof Error){const l=t.get(c)||{value:o,weight:0};l.weight+=d,t.set(c,l),(r==null||l.weight>r.weight)&&(r=l)}else n.push(BigInt(o)),e+=d;if(e<a)return r&&r.weight>=a?r.value:void 0;n.sort((o,c)=>o<c?-1:c>o?1:0);const i=Math.floor(n.length/2);return n.length%2?n[i]:(n[i-1]+n[i]+vn)/Tn}function Ce(a,s){const e=ye(a,s);if(e!==void 0)return e;for(const t of s)if(t.value)return t.value}function On(a,s){if(a===1)return te(De(a,s),"%internal");const e=new Map,t=(i,o)=>{const c=e.get(i)||{result:i,weight:0};c.weight+=o,e.set(i,c)};for(const{weight:i,value:o}of s){const c=te(o);t(c-1,i),t(c,i),t(c+1,i)}let r=0,n;for(const{weight:i,result:o}of e.values())i>=a&&(i>r||n!=null&&i===r&&o>n)&&(r=i,n=o);return n}var k,x,W,R,Yt,Me,er,tr,$e;class Zt extends ke{constructor(e,t,r){super(t,r);p(this,R);g(this,"quorum");g(this,"eventQuorum");g(this,"eventWorkers");p(this,k);p(this,x);p(this,W);f(this,k,e.map(n=>n instanceof ke?Object.assign({provider:n},ut,lt):Object.assign({},ut,n,lt))),f(this,x,-2),f(this,W,null),r&&r.quorum!=null?this.quorum=r.quorum:this.quorum=Math.ceil(u(this,k).reduce((n,i)=>(n+=i.weight,n),0)/2),this.eventQuorum=1,this.eventWorkers=1,m(this.quorum<=u(this,k).reduce((n,i)=>n+i.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return u(this,k).map(e=>{const t=Object.assign({},e);for(const r in t)r[0]==="_"&&delete t[r];return t})}async _detectNetwork(){return T.from(xt(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{const r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}async _perform(e){if(e.method==="broadcastTransaction"){const i=u(this,k).map(d=>null),o=u(this,k).map(async({provider:d,weight:l},w)=>{try{const h=await d._perform(e);i[w]=Object.assign(xe(e.method,{result:h}),{weight:l})}catch(h){i[w]=Object.assign(xe(e.method,{error:h}),{weight:l})}});for(;;){const d=i.filter(h=>h!=null);for(const{value:h}of d)if(!(h instanceof Error))return h;const l=ye(this.quorum,i.filter(h=>h!=null));if(Te(l,"INSUFFICIENT_FUNDS"))throw l;const w=o.filter((h,y)=>i[y]==null);if(w.length===0)break;await Promise.race(w)}const c=Ce(this.quorum,i);if(b(c!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:i.map(Oe)}}),c instanceof Error)throw c;return c}await S(this,R,er).call(this);const t=new Set;let r=0;for(;;){const i=S(this,R,Me).call(this,t,e);if(i==null||(r+=i.config.weight,r>=this.quorum))break}const n=await S(this,R,$e).call(this,t,e);for(const i of t)i.perform&&i.result==null&&i.config.lateResponses++;return n}async destroy(){for(const{provider:e}of u(this,k))e.destroy();super.destroy()}}k=new WeakMap,x=new WeakMap,W=new WeakMap,R=new WeakSet,Yt=function(e){const t=Array.from(e).map(n=>n.config),r=u(this,k).slice();Nn(r),r.sort((n,i)=>n.priority-i.priority);for(const n of r)if(!n._lastFatalError&&t.indexOf(n)===-1)return n;return null},Me=function(e,t){const r=S(this,R,Yt).call(this,e);if(r==null)return null;const n={config:r,result:null,didBump:!1,perform:null,staller:null},i=Ue();return n.perform=(async()=>{try{r.requests++;const c=await this._translatePerform(r.provider,t);n.result={result:c}}catch(c){r.errorResponses++,n.result={error:c}}const o=Ue()-i;r._totalTime+=o,r.rollingDuration=.95*r.rollingDuration+.05*o,n.perform=null})(),n.staller=(async()=>{await Sn(r.stallTimeout),n.staller=null})(),e.add(n),n},er=async function(){let e=u(this,W);if(!e){const t=[];u(this,k).forEach(r=>{t.push((async()=>{await _n(r,0),r._lastFatalError||(r._network=await r.provider.getNetwork())})())}),f(this,W,e=(async()=>{await Promise.all(t);let r=null;for(const n of u(this,k)){if(n._lastFatalError)continue;const i=n._network;r==null?r=i.chainId:i.chainId!==r&&b(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})())}await e},tr=async function(e,t){const r=[];for(const n of e)if(n.result!=null){const{tag:i,value:o}=xe(t.method,n.result);r.push({tag:i,value:o,weight:n.config.weight})}if(!(r.reduce((n,i)=>n+i.weight,0)<this.quorum)){switch(t.method){case"getBlockNumber":{u(this,x)===-2&&f(this,x,Math.ceil(te(De(this.quorum,u(this,k).filter(i=>!i._lastFatalError).map(i=>({value:i.blockNumber,tag:te(i.blockNumber).toString(),weight:i.weight}))))));const n=On(this.quorum,r);return n===void 0?void 0:(n>u(this,x)&&f(this,x,n),u(this,x))}case"getGasPrice":case"getPriorityFee":case"estimateGas":return De(this.quorum,r);case"getBlock":return"blockTag"in t&&t.blockTag==="pending"?Ce(this.quorum,r):ye(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return ye(this.quorum,r);case"broadcastTransaction":return Ce(this.quorum,r)}b(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${Oe(t.method)})`})}},$e=async function(e,t){if(e.size===0)throw new Error("no runners?!");const r=[];let n=0;for(const o of e){if(o.perform&&r.push(o.perform),o.staller){r.push(o.staller);continue}o.didBump||(o.didBump=!0,n++)}const i=await S(this,R,tr).call(this,e,t);if(i!==void 0){if(i instanceof Error)throw i;return i}for(let o=0;o<n;o++)S(this,R,Me).call(this,e,t);return b(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map(o=>Oe(o.result))}}),await Promise.race(r),await S(this,R,$e).call(this,e,t)};function xn(a){return a&&typeof a.send=="function"&&typeof a.close=="function"}const Cn="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function An(a,s){s==null&&(s={});const e=i=>s[i]==="-"?!1:typeof s.exclusive=="string"?i===s.exclusive:Array.isArray(s.exclusive)?s.exclusive.indexOf(i)!==-1:!0;if(typeof a=="string"&&a.match(/^https?:/))return new v(a);if(typeof a=="string"&&a.match(/^wss?:/)||xn(a))return new tt(a);let t=null;try{t=T.from(a)}catch{}const r=[];if(e("publicPolygon")&&t&&(t.name==="matic"?r.push(new v("https://polygon-rpc.com/",t,{staticNetwork:t})):t.name==="matic-amoy"&&r.push(new v("https://rpc-amoy.polygon.technology/",t,{staticNetwork:t}))),e("alchemy"))try{r.push(new se(a,s.alchemy))}catch{}if(e("ankr")&&s.ankr!=null)try{r.push(new re(a,s.ankr))}catch{}if(e("chainstack"))try{r.push(new ne(a,s.chainstack))}catch{}if(e("cloudflare"))try{r.push(new zt(a))}catch{}if(e("etherscan"))try{r.push(new Gt(a,s.etherscan))}catch{}if(e("infura"))try{let i=s.infura,o;typeof i=="object"&&(o=i.projectSecret,i=i.projectId),r.push(new Q(a,i,o))}catch{}if(e("quicknode"))try{let i=s.quicknode;r.push(new ae(a,i))}catch{}if(b(r.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),r.length===1)return r[0];let n=Math.floor(r.length/2);return n>2&&(n=2),t&&Cn.indexOf(t.name)!==-1&&(n=1),s&&s.quorum&&(n=s.quorum),new Zt(r,void 0,{quorum:n})}var B,J;const st=class st extends Ct{constructor(e){super(e.provider);g(this,"signer");p(this,B);p(this,J);P(this,{signer:e}),f(this,B,null),f(this,J,0)}async getAddress(){return this.signer.getAddress()}connect(e){return new st(this.signer.connect(e))}async getNonce(e){if(e==="pending"){u(this,B)==null&&f(this,B,super.getNonce("pending"));const t=u(this,J);return await u(this,B)+t}return super.getNonce(e)}increment(){at(this,J)._++}reset(){f(this,J,0),f(this,B,null)}async sendTransaction(e){const t=this.getNonce("pending");return this.increment(),e=await this.signer.populateTransaction(e),e.nonce=await t,await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}};B=new WeakMap,J=new WeakMap;let je=st;var H,V;const D=class D extends ir{constructor(e,t,r){const n=Object.assign({},r??{},{batchMaxCount:1});m(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(t,n);p(this,H);p(this,V);f(this,V,null),r&&r.providerInfo&&f(this,V,r.providerInfo),f(this,H,async(i,o)=>{const c={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const d=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:d}),d}catch(d){const l=new Error(d.message);throw l.code=d.code,l.data=d.data,l.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:l}),l}})}get providerInfo(){return u(this,V)}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){m(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await u(this,H).call(this,e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch(t=JSON.parse(JSON.stringify(t)),t.error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`;break}return super.getRpcError(e,t)}async hasSigner(e){e==null&&(e=0);const t=await this.send("eth_accounts",[]);return typeof e=="number"?t.length>e:(e=e.toLowerCase(),t.filter(r=>r.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await u(this,H).call(this,"eth_requestAccounts",[])}catch(t){const r=t.payload;throw this.getRpcError(r,{id:r.id,error:t})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new D(e.provider);const t=e.window?e.window:typeof window<"u"?window:null;if(t==null)return null;const r=e.anyProvider;if(r&&t.ethereum)return new D(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const n=e.timeout?e.timeout:300;return n===0?null:await new Promise((i,o)=>{let c=[];const d=h=>{c.push(h.detail),r&&l()},l=()=>{if(clearTimeout(w),c.length)if(e&&e.filter){const h=e.filter(c.map(y=>Object.assign({},y.info)));if(h==null)i(null);else if(h instanceof D)i(h);else{let y=null;if(h.uuid&&(y=c.filter(Se=>h.uuid===Se.info.uuid)[0]),y){const{provider:X,info:Se}=y;i(new D(X,void 0,{providerInfo:Se}))}else o(Ee("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:y}=c[0];i(new D(h,void 0,{providerInfo:y}))}else i(null);t.removeEventListener("eip6963:announceProvider",d)},w=setTimeout(()=>{l()},n);t.addEventListener("eip6963:announceProvider",d),t.dispatchEvent(new Event("eip6963:requestProvider"))})}};H=new WeakMap,V=new WeakMap;let qe=D;function In(a){switch(a){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}m(!1,"unsupported network","network",a)}class Re extends v{constructor(e,t){e==null&&(e="mainnet");const r=T.from(e);t==null&&(t=null);const n=Re.getRequest(r);super(n,r,{staticNetwork:r});g(this,"apiKey");P(this,{apiKey:t})}_getProvider(e){try{return new Re(e,this.apiKey)}catch{}return super._getProvider(e)}isCommunityResource(){return this.apiKey===null}getRpcRequest(e){const t=super.getRpcRequest(e);return t&&t.method==="eth_estimateGas"&&t.args.length==1&&(t.args=t.args.slice(),t.args.push("latest")),t}getRpcError(e,t){const r=t?t.error:null;if(r&&r.code===-32015&&!At(r.data||"",!0)){const n={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"};let i="";r.message==="VM execution error."?i=n[r.data]||"":n[r.message||""]&&(i=n[r.message||""]),i&&(r.message+=` (reverted: ${r.data})`,r.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+i)}else r&&r.code===-32e3&&r.message==="wrong transaction nonce"&&(r.message+=" (nonce too low)");return super.getRpcError(e,t)}static getRequest(e){const t=new C(In(e.name));return t.allowGzip=!0,t}}const me="62e1ad51b37b8e00394bda3b";function Fn(a){switch(a){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}m(!1,"unsupported network","network",a)}class Pe extends v{constructor(e,t,r){e==null&&(e="mainnet");const n=T.from(e);t==null&&(t=me),r==null&&(r=null);const i={staticNetwork:n},o=Pe.getRequest(n,t,r);super(o,n,i);g(this,"applicationId");g(this,"applicationSecret");P(this,{applicationId:t,applicationSecret:r})}_getProvider(e){try{return new Pe(e,this.applicationId,this.applicationSecret)}catch{}return super._getProvider(e)}static getRequest(e,t,r){t==null&&(t=me);const n=new C(`https://${Fn(e.name)}/v1/lb/${t}`);return n.allowGzip=!0,r&&n.setCredentials("",r),t===me&&(n.retryFunc=async(i,o,c)=>(U("PocketProvider"),!0)),n}isCommunityResource(){return this.applicationId===me}}const Bn=void 0;var pe=function(a,s,e,t,r){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?a!==s||!r:!s.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?r.call(a,e):r?r.value=e:s.set(a,e),e},K=function(a,s,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?a!==s||!t:!s.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(a):t?t.value:s.get(a)},Y,O;class rt extends or{constructor(s,e){if(super("ECC",s,rt),Y.set(this,void 0),O.set(this,void 0),e){if(e.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");pe(this,Y,new Uint8Array(e),"f")}else pe(this,Y,new Uint8Array(16),"f");pe(this,O,this.iv,"f")}get iv(){return new Uint8Array(K(this,Y,"f"))}encrypt(s){if(s.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=16){for(let r=0;r<16;r++)K(this,O,"f")[r]^=s[t+r];pe(this,O,this.aes.encrypt(K(this,O,"f")),"f"),e.set(K(this,O,"f"),t)}return e}decrypt(s){if(s.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const e=new Uint8Array(s.length);for(let t=0;t<s.length;t+=16){const r=this.aes.decrypt(s.subarray(t,t+16));for(let n=0;n<16;n++)e[t+n]=r[n]^K(this,O,"f")[n],K(this,O,"f")[n]=s[t+n]}return e}}Y=new WeakMap,O=new WeakMap;function Un(a){if(a.length<16)throw new TypeError("PKCS#7 invalid length");const s=a[a.length-1];if(s>16)throw new TypeError("PKCS#7 padding byte out of range");const e=a.length-s;for(let t=0;t<s;t++)if(a[e+t]!==s)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(a.subarray(0,e))}function Je(a){try{if(JSON.parse(a).encseed)return!0}catch{}return!1}function Ke(a,s){const e=JSON.parse(a),t=cr(s),r=Qe(it(e,"ethaddr:string!")),n=ur(it(e,"encseed:string!"));m(n&&n.length%16===0,"invalid encseed","json",a);const i=E(We(t,t,2e3,32,"sha256")).slice(0,16),o=n.slice(0,16),c=n.slice(16),d=new rt(i,o),l=Un(E(d.decrypt(c)));let w="";for(let h=0;h<l.length;h++)w+=String.fromCharCode(l[h]);return{address:r,privateKey:It(w)}}function ft(a){return new Promise(s=>{setTimeout(()=>{s()},a)})}var ce,Le;const M=class M extends Ft{constructor(s,e){typeof s=="string"&&!s.startsWith("0x")&&(s="0x"+s);let t=typeof s=="string"?new Bt(s):s;super(t,e)}connect(s){return new M(this.signingKey,s)}async encrypt(s,e){const t={address:this.address,privateKey:this.privateKey};return await Ut(t,s,{progressCallback:e})}encryptSync(s){const e={address:this.address,privateKey:this.privateKey};return Dt(e,s)}static async fromEncryptedJson(s,e,t){var n;let r=null;return Be(s)?r=await $t(s,e,t):Je(s)&&(t&&(t(0),await ft(0)),r=Ke(s,e),t&&(t(1),await ft(0))),S(n=M,ce,Le).call(n,r)}static fromEncryptedJsonSync(s,e){var r;let t=null;return Be(s)?t=jt(s,e):Je(s)?t=Ke(s,e):m(!1,"invalid JSON wallet","json","[ REDACTED ]"),S(r=M,ce,Le).call(r,t)}static createRandom(s){const e=be.createRandom();return s?e.connect(s):e}static fromPhrase(s,e){const t=be.fromPhrase(s);return e?t.connect(e):t}};ce=new WeakSet,Le=function(s){if(m(s,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in s&&s.mnemonic&&s.mnemonic.locale==="en"){const t=Mt.fromEntropy(s.mnemonic.entropy),r=be.fromMnemonic(t,s.mnemonic.path);if(r.address===s.address&&r.privateKey===s.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const e=new M(s.privateKey);return m(e.address===s.address,"address/privateKey mismatch","json","[ REDACTED ]"),e},p(M,ce);let ze=M;const Dn=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function Mn(a,s){const e=(1<<a)-1,t=[];let r=0,n=0,i=0;for(let o=0;o<s.length;o++)for(r=r<<6|Dn.indexOf(s[o]),n+=6;n>=a;){const c=r>>n-a;r&=(1<<n-a)-1,n-=a,c===0?i+=e:(t.push(c+i),i=0)}return t}function $n(a,s){let e=lr(a).join(",");return s.split(/,/g).forEach(t=>{const r=t.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);m(r!==null,"internal error parsing accents","accents",s);let n=0;const i=Mn(parseInt(r[3]),r[4]),o=parseInt(r[2]),c=new RegExp(`([${r[1]}])`,"g");e=e.replace(c,(d,l)=>(--i[n]===0&&(l=String.fromCharCode(l.charCodeAt(0),o),n++),l))}),e.split(",")}var ue;class jn extends qt{constructor(e,t,r,n){super(e,t,n);p(this,ue);f(this,ue,r)}get _accent(){return u(this,ue)}_decodeWords(){return $n(this._data,this._accent)}}ue=new WeakMap;const qn={en:Jt.wordlist()},zn=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:Nt,AbstractProvider:ke,AbstractSigner:Ct,AlchemyProvider:se,AnkrProvider:re,BaseContract:Ie,BaseWallet:Ft,Block:fr,BlockscoutProvider:Re,BrowserProvider:qe,ChainstackProvider:ne,CloudflareProvider:zt,ConstructorFragment:hr,Contract:_t,ContractEventPayload:dr,ContractFactory:Ye,ContractTransactionReceipt:mr,ContractTransactionResponse:pr,ContractUnknownEventPayload:gr,EnsPlugin:br,EnsResolver:yr,ErrorDescription:wr,ErrorFragment:kr,EtherSymbol:Er,EtherscanPlugin:et,EtherscanProvider:Gt,EventFragment:Rr,EventLog:Pr,EventPayload:vr,FallbackFragment:Tr,FallbackProvider:Zt,FeeData:Nr,FeeDataNetworkPlugin:Sr,FetchCancelSignal:_r,FetchRequest:C,FetchResponse:Or,FetchUrlFeeDataNetworkPlugin:xr,FixedNumber:Cr,Fragment:Ar,FunctionFragment:Ir,GasCostPlugin:Fr,HDNodeVoidWallet:Br,HDNodeWallet:be,Indexed:Ur,InfuraProvider:Q,InfuraWebSocketProvider:Xt,Interface:kt,IpcSocketProvider:Bn,JsonRpcApiProvider:Ot,JsonRpcProvider:v,JsonRpcSigner:Dr,LangEn:Jt,Log:Mr,LogDescription:$r,MaxInt256:sn,MaxUint256:tn,MessagePrefix:jr,MinInt256:rn,Mnemonic:Mt,MulticoinProviderPlugin:qr,N:Ys,NamedFragment:Jr,Network:T,NetworkPlugin:Pt,NonceManager:je,ParamType:Kr,PocketProvider:Pe,QuickNodeProvider:ae,Result:zr,Signature:Lr,SigningKey:Bt,SocketBlockSubscriber:Wt,SocketEventSubscriber:Vt,SocketPendingSubscriber:Ht,SocketProvider:Qt,SocketSubscriber:Ne,StructFragment:Gr,Transaction:St,TransactionDescription:Wr,TransactionReceipt:Hr,TransactionResponse:Vr,Typed:Qr,TypedDataEncoder:Xr,UndecodedEventLog:Zr,UnmanagedSubscriber:Fe,Utf8ErrorFuncs:Yr,VoidSigner:es,Wallet:ze,WebSocketProvider:tt,WeiPerEther:en,Wordlist:ts,WordlistOwl:qt,WordlistOwlA:jn,ZeroAddress:rs,ZeroHash:ss,accessListify:Tt,assert:b,assertArgument:m,assertArgumentCount:ns,assertNormalize:as,assertPrivate:is,authorizationify:os,checkResultErrors:cs,computeAddress:us,computeHmac:ht,concat:ve,copyRequest:ls,dataLength:wt,dataSlice:fs,decodeBase58:hs,decodeBase64:ds,decodeBytes32String:hn,decodeRlp:ms,decryptCrowdsaleJson:Ke,decryptKeystoreJson:$t,decryptKeystoreJsonSync:jt,defaultPath:ps,defineProperties:P,dnsEncode:gs,encodeBase58:bs,encodeBase64:ys,encodeBytes32String:fn,encodeRlp:ws,encryptKeystoreJson:Ut,encryptKeystoreJsonSync:Dt,ensNormalize:ks,formatEther:Es,formatUnits:Rs,fromTwos:Ps,getAccountPath:vs,getAddress:Qe,getBigInt:xt,getBytes:E,getBytesCopy:Ts,getCreate2Address:Ns,getCreateAddress:Et,getDefaultProvider:An,getIcapAddress:Ss,getIndexedAccountPath:_s,getNumber:te,getUint:Os,hashAuthorization:xs,hashMessage:Cs,hexlify:ee,id:It,isAddress:As,isAddressable:Is,isBytesLike:Fs,isCallException:Bs,isCrowdsaleJson:Je,isError:Te,isHexString:At,isKeystoreJson:Be,isValidName:Us,keccak256:Ge,lock:nn,makeError:Ee,mask:Ds,namehash:Ms,parseEther:$s,parseUnits:js,pbkdf2:We,randomBytes:Ae,recoverAddress:qs,resolveAddress:Js,resolveProperties:Rt,ripemd160:dt,scrypt:mt,scryptSync:pt,sha256:He,sha512:gt,showThrottleMessage:U,solidityPacked:Ze,solidityPackedKeccak256:un,solidityPackedSha256:ln,stripZerosLeft:Ks,toBeArray:yt,toBeHex:zs,toBigInt:Ls,toNumber:Gs,toQuantity:vt,toTwos:bt,toUtf8Bytes:Ve,toUtf8CodePoints:Ws,toUtf8String:we,uuidV4:Hs,verifyAuthorization:Vs,verifyMessage:Qs,verifyTypedData:Xs,version:Zs,wordlists:qn,zeroPadBytes:Xe,zeroPadValue:ge},Symbol.toStringTag,{value:"Module"}));export{Nt as AbiCoder,ke as AbstractProvider,Ct as AbstractSigner,se as AlchemyProvider,re as AnkrProvider,Ie as BaseContract,Ft as BaseWallet,fr as Block,Re as BlockscoutProvider,qe as BrowserProvider,ne as ChainstackProvider,zt as CloudflareProvider,hr as ConstructorFragment,_t as Contract,dr as ContractEventPayload,Ye as ContractFactory,mr as ContractTransactionReceipt,pr as ContractTransactionResponse,gr as ContractUnknownEventPayload,br as EnsPlugin,yr as EnsResolver,wr as ErrorDescription,kr as ErrorFragment,Er as EtherSymbol,et as EtherscanPlugin,Gt as EtherscanProvider,Rr as EventFragment,Pr as EventLog,vr as EventPayload,Tr as FallbackFragment,Zt as FallbackProvider,Nr as FeeData,Sr as FeeDataNetworkPlugin,_r as FetchCancelSignal,C as FetchRequest,Or as FetchResponse,xr as FetchUrlFeeDataNetworkPlugin,Cr as FixedNumber,Ar as Fragment,Ir as FunctionFragment,Fr as GasCostPlugin,Br as HDNodeVoidWallet,be as HDNodeWallet,Ur as Indexed,Q as InfuraProvider,Xt as InfuraWebSocketProvider,kt as Interface,Bn as IpcSocketProvider,Ot as JsonRpcApiProvider,v as JsonRpcProvider,Dr as JsonRpcSigner,Jt as LangEn,Mr as Log,$r as LogDescription,sn as MaxInt256,tn as MaxUint256,jr as MessagePrefix,rn as MinInt256,Mt as Mnemonic,qr as MulticoinProviderPlugin,Ys as N,Jr as NamedFragment,T as Network,Pt as NetworkPlugin,je as NonceManager,Kr as ParamType,Pe as PocketProvider,ae as QuickNodeProvider,zr as Result,Lr as Signature,Bt as SigningKey,Wt as SocketBlockSubscriber,Vt as SocketEventSubscriber,Ht as SocketPendingSubscriber,Qt as SocketProvider,Ne as SocketSubscriber,Gr as StructFragment,St as Transaction,Wr as TransactionDescription,Hr as TransactionReceipt,Vr as TransactionResponse,Qr as Typed,Xr as TypedDataEncoder,Zr as UndecodedEventLog,Fe as UnmanagedSubscriber,Yr as Utf8ErrorFuncs,es as VoidSigner,ze as Wallet,tt as WebSocketProvider,en as WeiPerEther,ts as Wordlist,qt as WordlistOwl,jn as WordlistOwlA,rs as ZeroAddress,ss as ZeroHash,Tt as accessListify,b as assert,m as assertArgument,ns as assertArgumentCount,as as assertNormalize,is as assertPrivate,os as authorizationify,cs as checkResultErrors,us as computeAddress,ht as computeHmac,ve as concat,ls as copyRequest,wt as dataLength,fs as dataSlice,hs as decodeBase58,ds as decodeBase64,hn as decodeBytes32String,ms as decodeRlp,Ke as decryptCrowdsaleJson,$t as decryptKeystoreJson,jt as decryptKeystoreJsonSync,ps as defaultPath,P as defineProperties,gs as dnsEncode,bs as encodeBase58,ys as encodeBase64,fn as encodeBytes32String,ws as encodeRlp,Ut as encryptKeystoreJson,Dt as encryptKeystoreJsonSync,ks as ensNormalize,zn as ethers,Es as formatEther,Rs as formatUnits,Ps as fromTwos,vs as getAccountPath,Qe as getAddress,xt as getBigInt,E as getBytes,Ts as getBytesCopy,Ns as getCreate2Address,Et as getCreateAddress,An as getDefaultProvider,Ss as getIcapAddress,_s as getIndexedAccountPath,te as getNumber,Os as getUint,xs as hashAuthorization,Cs as hashMessage,ee as hexlify,It as id,As as isAddress,Is as isAddressable,Fs as isBytesLike,Bs as isCallException,Je as isCrowdsaleJson,Te as isError,At as isHexString,Be as isKeystoreJson,Us as isValidName,Ge as keccak256,nn as lock,Ee as makeError,Ds as mask,Ms as namehash,$s as parseEther,js as parseUnits,We as pbkdf2,Ae as randomBytes,qs as recoverAddress,Js as resolveAddress,Rt as resolveProperties,dt as ripemd160,mt as scrypt,pt as scryptSync,He as sha256,gt as sha512,U as showThrottleMessage,Ze as solidityPacked,un as solidityPackedKeccak256,ln as solidityPackedSha256,Ks as stripZerosLeft,yt as toBeArray,zs as toBeHex,Ls as toBigInt,Gs as toNumber,vt as toQuantity,bt as toTwos,Ve as toUtf8Bytes,Ws as toUtf8CodePoints,we as toUtf8String,Hs as uuidV4,Vs as verifyAuthorization,Qs as verifyMessage,Xs as verifyTypedData,Zs as version,qn as wordlists,Xe as zeroPadBytes,ge as zeroPadValue};
